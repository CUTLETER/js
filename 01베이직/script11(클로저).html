<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // var a = 1;
        // function x() {
        //     var a = 10;
        //     console.log(a);
        // }
        // x();  결과값 1

        // var b = 1;
        // function y() {
        //     var b = 10;
        //     z();
        // } 결과값 10

        // function z() {
        //     console.log(b);
        // } 
        // y(); 결과값 1

        // var b = 1;
        // function y() {
        //     var b = 10;
        //     function z() { // 함수 안에 함수가 선언될 수 있음
        //         console.log(b); // 함수의 선언 위치에 따라 접근하는 스코프(범위)가 달라지는데, 렉시컬 스코프라고 부름
        //     }
        //     z();
        // }
        // y(); 결과값 10


        // 클로저 - 함수 안에 선언되는 내부 함수를 이용해서 바깥에 있는 변수 a에 접근할 수 있는 환경을 만들어줌
        function func() {
            var a = 1; // 지역 변수

            // var x = function() {}
            // return x                 줄여서 쓰면 아래 형태가 됨
            return function() {
                return a;
            }
        } // 원래대로라면 a의 유효 범위가 여기서 끝남
        var x = func();
        console.log(typeof x);
        var a = x();
        console.log(a);

        console.log(x());


        console.log('-------------------------------');


        // function compute() {
        //     var count = 0;
        //     return ++count;
        // }
        // compute();
        // console.log(compute()); 결과값 1
        // console.log(compute()); 결과값 1
        // console.log(compute()); 결과값 1

        // 클로저 상황으로 만들어봄
        function compute() {
            var count = 0;
            return function() { // 내부 변수의 값을 기억함
                return ++count;
            }
        }
        var x = compute();
        console.log(x()); //결과값 1
        console.log(x()); //결과값 2
        console.log(x()); //결과값 3


        console.log('------------------------------');

        // 클로저를 사용한 getter, setter 
        function obj() {
            var name = '홍길동';

            // return {키:값}
            return { // 객체는 {}로 호출함
                getName: function() {
                    return name;
                },
                setName: function(aaa) {
                    name = aaa;
                }
            }
        }
        var obj = obj();
        // console.log(obj);
        obj.setName('이순신');
        console.log(obj.getName());

    </script>
</body>
</html>